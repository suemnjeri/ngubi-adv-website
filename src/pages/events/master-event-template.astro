---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import LinkButton from '../../components/LinkButton.astro';
import EventForm from '../../components/EventForm.astro';

// These are the variables you will change for each new event!
// This is the data for the card AND the detail page.
const eventData = { 
  title: "Forest Ecology Walk",
  description: "A guided educational walk.",
  eventDate: new Date("2025-09-20T10:00:00Z"),
  eventTime: "10:00 AM - 12:00 PM",
  location: "Ngubi Forest Nature Trail",
  price: "KES 800 pp",
  registerLink: "https://paystack.com/pay/your-specific-event-link", // Add your link here
  eventImage: "/images/conservation-zigzag-1.JPG",
  // The content for the page body can be a variable too, but we'll use a slot for now.
  // Add more variables as needed
};

// Check if it's a free event
const isFreeEvent = eventData.price === 'Free Admission';
---

<Layout title={`${eventData.title} - Ngubi Adventure Forest Camp`}>
  <Header />
  <main class="pt-20 bg-surface text-foreground">
    <div class="relative w-full h-[50vh] overflow-hidden">
      {eventData.eventImage && (
        <img
          src={eventData.eventImage}
          alt={eventData.title}
          class="w-full h-full object-cover"
        />
      )}
      <div class="absolute inset-0 bg-black opacity-40"></div>
      <div class="absolute inset-0 flex items-center justify-center p-4 text-center">
        <h1 class="text-4xl sm:text-5xl font-bold text-white leading-tight">
          {eventData.title}
        </h1>
      </div>
    </div>

    <article class="prose prose-lg dark:prose-invert max-w-app mx-auto px-4 py-12">
      <div class="mb-8 text-text-muted-dark">
        <p class="font-bold">
          {eventData.eventDate.toLocaleString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
          {eventData.eventTime && ` at ${eventData.eventTime}`}
          {eventData.location && ` | ${eventData.location}`}
        </p>
      </div>

      {/* This is where you will write the main content for the event */}
      <p>Join our expert naturalists for a leisurely yet insightful walk through Ngubi Forest's diverse ecosystems. Learn about forest layers, symbiotic relationships, and the signs of wildlife. Perfect for all ages interested in deepening their connection with nature.</p>
      
      <h3>What to Expect</h3>
      <ul>
          <li>Expert-led guided tour</li>
          <li>Hands-on learning about local flora</li>
          <li>Wildlife spotting opportunities</li>
      </ul>

      <div class="text-center mt-12">
        {isFreeEvent ? (
          <EventForm />
        ) : (
          <LinkButton
            href={eventData.registerLink}
            class="inline-block px-8 py-4 text-lg bg-accent text-white rounded-full font-semibold whitespace-nowrap hover:bg-accent-dark transition-colors duration-200 shadow-lg"
            ariaLabel={`Register for ${eventData.title}`}
            title={`Register for ${eventData.title}`}
          >
            Register & Pay Now
          </LinkButton>
        )}
      </div>
    </article>
  </main>
  <Footer />
</Layout>